@accentColor: #B8860B;       // Gold
@background: #222;           // Dark background
@color: #E5E5E5;             // Light text
@sheetPadding: 1rem;         // Padding
@elementSpacing: 0.5rem;     // Element gap

body {
  margin: 10px auto;
  overflow-x: hidden;
  padding: 0 20px;
  max-width: 1024px;
  max-height: 100vh;
}

/* Dark color scheme adjustments */
@media (prefers-color-scheme: dark) {
  @background: #222222;
  @color: #E5E5E5;
}

/* Base usage (converted from :root in CSS) */
:root {
  // These won't directly apply as CSS variables but serve as fallback output
  --accent-color: 184, 134, 11;
  --background: 34, 34, 34;
  --color: 229, 229, 229;
  --sheet-padding: @{sheetPadding};
  --element-spacing: @{elementSpacing};
}

/* Tab Header */
.tab-headers {
  margin-top: 1rem;
  display: flex;
  border-bottom: 1px solid fade(@color, 20%);
  gap: 0.5rem;
  padding: 0.5rem;
  background-color: @background;
}

.tab-button {
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 0.3rem;
  padding: 0.5rem 0.75rem;
  background: none;
  border: none;
  opacity: 0.7;
  transition: opacity 0.3s ease;
  font-size: 1rem;

  &:hover {
    opacity: 1;
  }

  &.active {
    opacity: 1;
    border-bottom: 2px solid @color;
  }
}

.tab-content {
  background-color: @background;
  border-radius: 0 0 .25rem .25rem;
  padding: 1rem;
  position: relative;
  height: calc(100% - 50px);
  overflow-y: auto;
}

/* Tabs: show/hide */
.tab-pane {
  display: none;
  width: 100%;

  &.active {
    display: block;
  }
}

/* Inline Drawer */
.inline-drawer {
  display: block;
  position: relative;
  z-index: 9999;
  background-color: rgba(@background, 1);
  border: 1px solid #ccc;
  padding: 10px;
}

.inline-drawer-header {
  display: flex;
  justify-content: space-between;
  cursor: pointer;
}

.inline-drawer-content {
  margin-top: 8px;
}

/* Character Info */
.char-info-header {
  padding: @sheetPadding;
  display: flex;
  flex-direction: column;
  gap: @elementSpacing;
  border: solid @accentColor 1px;
  border-radius: 9px;
  margin-bottom: @elementSpacing;
  min-height: fit-content;

  .info-row {
    display: flex;
    gap: 1rem;
  }

  .info-group {
    flex: 1;
    min-width: 0;

    h6 {
      margin-top: 9px;
      text-align: center;
      color: @accentColor;
    }

    input {
      width: 100%;
      border: none;
      font-family: "Cinzel Decorative", serif;
      text-align: center;
      height: 30px;
      font-size: 16px;
      border-bottom: 1px solid @accentColor;
      background: transparent;
      color: @color;
    }
  }
}

/* Core Tab Stats */
.attribute-scores {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
  gap: @elementSpacing;
  max-width: 100%;
}

.attribute-box {
  border: 1px solid @accentColor;
  border-radius: 9px;
  padding: @elementSpacing;
  text-align: center;
  aspect-ratio: 1;
  display: flex;
  flex-direction: column;
  align-items: center;

  .title-top {
    margin: 0 0 0.5rem;
    color: @accentColor;
  }

  .ability-number {
    width: 100%;
    height: auto;
    font-size: clamp(24px, 4vw, 60px);
    font-family: "Cinzel Decorative", serif;
    text-align: center;
    border: none;
    background: transparent;
    color: @accentColor;
    padding: 0.25em;
  }

  .ability-modifier {
    width: clamp(25px, 3vw, 35px);
    height: clamp(25px, 3vw, 35px);
    border-radius: 50%;
    font-size: clamp(14px, 2vw, 20px);
    text-align: center;
    background: fade(@accentColor, 90%);
    border: 1px solid @accentColor;
  }
}

/* Saving Throws, Skills, etc. */
.saving-throws,
.skill-scores {
  border: solid @accentColor 1px;
  border-radius: 9px;
  margin-bottom: 1rem;
  padding: @sheetPadding;
}

.skill-checklist {
  font-size: clamp(10px, 1.5vw, 14px);
}

/* Media Queries Example */
@media screen and (max-width: 768px) {
  @sheetPadding: 0.5rem;
  @elementSpacing: 0.25rem;

  .attribute-scores {
    grid-template-columns: repeat(2, 1fr) !important;
  }
}
@media screen and (min-width: 769px) and (max-width: 1024px) {
  .attribute-scores {
    grid-template-columns: repeat(3, 1fr) !important;
  }
}
@media screen and (min-width: 1025px) {
  .attribute-scores {
    grid-template-columns: repeat(6, 1fr) !important;
  }
}

/* Flex Container */
.flex-container {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.inputs {
  padding: 0 10px;
}

.form-group {
  margin-bottom: 5px;
  position: relative;
}

textarea.output {
  resize: none;
  white-space: nowrap;
  overflow-x: auto;
}

/* Level Controls */
.level-controls {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
}

.level-btn {
  background: none;
  border: 1px solid fade(@color, 20%);
  color: @color;
  width: 24px;
  height: 24px;
  border-radius: 4px;
  cursor: pointer;
  padding: 0;
  line-height: 1;

  &:hover {
    background: fade(@color, 10%);
  }
}

.level-down,
.level-up {
  background: none;
  border: 1px solid @accentColor;
  color: @accentColor;
  width: 24px;
  height: 24px;
  border-radius: 4px;
  cursor: pointer;
  padding: 0;
  line-height: 1;
}

#char-level {
  width: 60px;
  text-align: center;
}

.player-level {
  width: 40px;
  text-align: center;
  border: none;
  font-family: "Cinzel Decorative", serif;
  font-size: 16px;
}

/* XP Group */
.xp-group {
  flex: 2;
}

.xp-inputs {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  justify-content: center;
}

.xp-inputs input {
  width: 100px;
}

.xp-separator {
  color: @accentColor;
  font-weight: bold;
}

/* Saving Throws and Skills */
.saving-throws {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: @elementSpacing;
}

.saving-proficiency,
.skill-proficiency {
  list-style: none;
  padding: 0;
  margin: 0.5rem 0;
}

.skill-checklist {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 0.25rem;
}

.skill-check,
.proficiency-check {
  margin: 0;
  width: 13px;
  height: 13px;
}

.skill-score,
.bonus-number {
  width: 20px;
  text-align: center;
  border: none;
  border-bottom: 0.5px solid @accentColor;
  background: transparent;
  color: @color;
}

.saving-ability,
.skill-bonus {
  flex: 1;
}

.skill-ability {
  color: fade(@accentColor, 80%);
  font-size: 0.8rem;
  width: 35px;
}

/* Headers and Text */
.saving-text,
.skill-text {
  text-align: center;
  color: @accentColor;
  margin: 0.5rem 0;
}

/* Proficiency and Passive Scores */
.proficiency-bonus,
.passive-perception {
  text-align: center;
  margin-bottom: 1rem;
}

.proficiency-score,
.passive-perception-score {
  width: 35px;
  height: 35px;
  border-radius: 50%;
  text-align: center;
  margin: 0.5rem auto;
  background: fade(@accentColor, 90%);
  border: 1px solid @accentColor;
  color: @color;
  font-family: "Cinzel Decorative", serif;
  font-size: 20px;
}

/* Skills Section - Flexible Layout */
.skill-scores {
  display: flex;
  flex-direction: column;
  gap: @elementSpacing;
  max-height: 60vh;
  overflow-y: auto;
  padding: @sheetPadding;
}

.skill-proficiency {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: @elementSpacing;
}

/* Ensure inputs remain usable at small sizes */
input[type="number"] {
  min-width: 40px;
  max-width: 100%;
}

/* Ensure content doesn't overflow draggable window */
#character-sheet {
  height: 100%;
  overflow-y: auto;
  padding: @sheetPadding;
  display: flex;
  flex-direction: column;
  gap: @elementSpacing;
}

/* Fix for draggable window scroll */
.character-sheet-draggable {
  display: flex;
  flex-direction: column;
}

/* Core Tab Layout */
.character-stats {
  display: grid;
  grid-template-columns: minmax(200px, 1fr) minmax(300px, 2fr);
  gap: @elementSpacing;
  padding: @sheetPadding;
  height: fit-content;
}

/* Responsive Scaling */
@media screen and (max-width: 768px) {
  :root {
    --sheet-padding: 0.5rem;
    --element-spacing: 0.25rem;
  }

  .attribute-scores {
    grid-template-columns: repeat(2, 1fr) !important;
  }

  .character-stats {
    grid-template-columns: 1fr;
  }
}

@media screen and (min-width: 769px) and (max-width: 1024px) {
  .attribute-scores {
    grid-template-columns: repeat(3, 1fr) !important;
  }
}

@media screen and (min-width: 1025px) {
  .attribute-scores {
    grid-template-columns: repeat(6, 1fr) !important;
  }
}

/* Window Position Classes */
.character-sheet-draggable.topLeft {
  top: 1rem;
  left: 1rem;
}

.character-sheet-draggable.topRight {
  top: 1rem;
  right: 1rem;
}

.character-sheet-draggable.bottomLeft {
  bottom: 1rem;
  left: 1rem;
}

.character-sheet-draggable.bottomRight {
  bottom: 1rem;
  right: 1rem;
}

.character-sheet-draggable.center {
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

/* Window Size Classes */
.character-sheet-draggable.compact {
  width: 400px;
  height: 600px;
}

.character-sheet-draggable.normal {
  width: 600px;
  height: 800px;
}

.character-sheet-draggable.large {
  width: 800px;
  height: 1000px;
}

/* Parent-specific positioning */
#chat .character-sheet-draggable {
  position: absolute;
  right: 1rem;
  top: 1rem;
  z-index: 1000;
}

#right-nav-panel .character-sheet-draggable {
  position: relative;
  margin: 1rem;
}

#left-nav-panel .character-sheet-draggable {
  position: relative;
  margin: 1rem;
}

#movingDivs .character-sheet-draggable {
  position: fixed;
  z-index: 9999;
}

/* Settings Controls */
.sheet-settings {
  display: flex;
  gap: 0.5rem;
  align-items: center;
  margin-right: 1rem;
}

.parent-select {
  min-width: 120px;
  height: 2em;
}

.sheet-settings {
  display: flex;
  gap: 1rem;
  padding: 0.5rem;
  border-bottom: 1px solid fade(@accentColor, 20%);
}

.sheet-position,
.sheet-size {
  flex: 1;
}


